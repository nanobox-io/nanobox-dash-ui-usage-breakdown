!function t(e,a,n){function r(i,u){if(!a[i]){if(!e[i]){var o="function"==typeof require&&require;if(!u&&o)return o(i,!0);if(s)return s(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=a[i]={exports:{}};e[i][0].call(l.exports,function(t){var a=e[i][1][t];return r(a?a:t)},l,l.exports,t,e,a,n)}return a[i].exports}for(var s="function"==typeof require&&require,i=0;i<n.length;i++)r(n[i]);return r}({1:[function(t,e,a){var n;e.exports=n=function(){function t(t){var e,a,n,r;n=this,this.$node=t[0],r=135,this.width=r,this.height=r,a=r/2,e=r/2.7,this.pieFn=d3.layout.pie().startAngle(0).endAngle(Math.PI).padAngle(.025).sort(null).value(function(t){return t.value}),this.arcFn=d3.svg.arc().innerRadius(e).outerRadius(a),this.svg=d3.select(this.$node).append("svg:svg").attr({"class":"gauges",height:this.height/2,transform:"translate(0, "+this.height/2+")"})}return t.prototype.update=function(t){var e,a;return a=this,e=this.svg.selectAll("g.gauge").data(t).enter().append("svg:g").style("opacity",0).transition().duration(500).delay(250).style("opacity",1).each(function(t,e){var n;return n=d3.select(this),n.attr({"class":"gauge "+t.metric,transform:"translate("+(a.width*e+15*e+5)+", 0)"}),n.append("svg:text").text(t.metric).attr({"class":"label",x:a.width/2,y:a.height/2-10,"text-anchor":"middle"}),n.selectAll("path").data(a.pieFn(t.data)).enter().append("path").attr({"class":function(t){return t.data.type+" "+t.data.name},d:a.arcFn,transform:"translate("+a.width/2+", "+a.height/2+") rotate(-90)"}).each(function(t){return this._curAngle=t})}),this.svg.selectAll("g.gauge").data(t).each(function(t){return d3.select(this).selectAll("path").data(a.pieFn(t.data)).transition().duration(500).attrTween("d",function(t){var e;return e=d3.interpolate(this._curAngle,t),this._curAngle=e(0),function(t){return a.arcFn(e(t))}})})},t}()},{}],2:[function(t,e,a){var n,r,s,i,u=function(t,e){return function(){return t.apply(e,arguments)}};s=t("jade/component"),n=t("gauges"),i=t("jade/stats-row"),r=function(){function t(t,e){this.options=null!=e?e:{},this.update=u(this.update,this),this.$node=$(s()),t.append(this.$node),this.build()}return t.prototype.build=function(){return this.$gauges=$(".gauges",this.$node),this.$table=$("table.services",this.$node),this._subscribeToUsageBreakdownData(this.options.id)},t.prototype.update=function(t){return $("svg",this.$gauges).length?this._updateGauges(t):this._buildGauges(t),$("tbody.stats",this.$table).children().length?this._updateTable(t):this._buildTable(t)},t.prototype._buildGauges=function(t){return this.gauges=new n(this.$gauges,{data:this._getDataByMetrics(t)})},t.prototype._buildTable=function(t){var e,a,n,r,s,u,o,d,l,c,h,p,g;for(h=this._getDataByMetrics(t),r=0,u=h.length;u>r;r++)l=h[r],$("thead tr",this.$table).append($("<th class='label'>"+l.metric+"</td>"));for(t.push({type:"internal",name:"free",metrics:this._calculateUnused(t)}),n=s=0,o=t.length;o>s;n=++s){for(a=t[n],g=[],p=this._getDataByMetrics(t),c=0,d=p.length;d>c;c++)l=p[c],g.push({metric:l.metric,val:100*l.data[n].value});e=$(i({name:a.name,kind:a.kind,rows:g})),$("tbody",this.$table).append(e)}return castShadows($("tbody",this.$table))},t.prototype._updateGauges=function(t){return this.gauges.update(this._getDataByMetrics(t))},t.prototype._updateTable=function(t){var e,a,n,r,s,i;for(t.push({type:"internal",name:"free",metrics:this._calculateUnused(t)}),i=[],a=n=0,r=t.length;r>n;a=++n)e=t[a],i.push(function(){var n,r,i,u;for(i=this._getDataByMetrics(t),u=[],n=0,r=i.length;r>n;n++)s=i[n],u.push($("."+e.name+" ."+s.metric,this.$node).html((100*s.data[a].value).toPrecision(2)+"%"));return u}.call(this));return i},t.prototype._subscribeToUsageBreakdownData=function(t){return PubSub.publish("STATS.SUBSCRIBE.USAGE_BREAKDOWN",{statProviderId:t,callback:this.update})},t.prototype._getDataByMetrics=function(t){var e,a,n,r,s,i,u,o;for(s={},a=0,r=t.length;r>a;a++){e=t[a],i=e.metrics;for(n in i)o=i[n],s[n]||(s[n]=[]),s[n].push({type:e.type,name:e.name,value:o})}u=this._calculateUnused(t);for(n in u)o=u[n],s[n].push({type:"internal",name:"unused",value:o});return Object.keys(s).map(function(t){return{metric:t,data:s[t]}})},t.prototype._calculateUnused=function(t){var e,a,n,r,s,i,u,o;for(i={},u={},a=0,r=t.length;r>a;a++){e=t[a],s=e.metrics;for(n in s)o=s[n],i[n]||(i[n]=0),i[n]+=o}for(n in i)o=i[n],u[n]=1-o;return u},t}(),window.nanobox||(window.nanobox={}),nanobox.UsageBreakdown=r},{gauges:1,"jade/component":3,"jade/stats-row":4}],3:[function(t,e,a){e.exports=function(t){var e=[];return e.push('<div class="nanobox-dash-ui-usage-breakdown"><div class="component"><div class="gauges"></div><table class="services"><thead class="labels"><tr><td colspan="2"></td></tr></thead><tbody class="stats"></tbody></table></div></div>'),e.join("")}},{}],4:[function(t,e,a){e.exports=function(t){var e,a=[],n=t||{};return function(t,n,r,s){a.push("<tr"+jade.cls([""+n],[!0])+'><td class="icon">'),t!=s&&a.push('<div class="icon-wrap"><img'+jade.attr("data-src","hex-"+t,!0,!1)+' scalable="true" class="shadow-icon"/></div>'),a.push('</td><td class="stat name">'+jade.escape(null==(e=n)?"":e)+"</td>"),function(){var t=r;if("number"==typeof t.length)for(var n=0,s=t.length;s>n;n++){var i=t[n];a.push("<td"+jade.cls(["stat","metric",""+i.metric],[null,null,!0])+">"+jade.escape(null==(e=i.val)?"":e)+"%</td>")}else{var s=0;for(var n in t){s++;var i=t[n];a.push("<td"+jade.cls(["stat","metric",""+i.metric],[null,null,!0])+">"+jade.escape(null==(e=i.val)?"":e)+"%</td>")}}}.call(this),a.push("</tr>")}.call(this,"kind"in n?n.kind:"undefined"!=typeof kind?kind:void 0,"name"in n?n.name:"undefined"!=typeof name?name:void 0,"rows"in n?n.rows:"undefined"!=typeof rows?rows:void 0,"undefined"in n?n.undefined:void 0),a.join("")}},{}]},{},[2]);