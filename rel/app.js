!function t(e,n,a){function s(i,c){if(!n[i]){if(!e[i]){var o="function"==typeof require&&require;if(!c&&o)return o(i,!0);if(r)return r(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var l=n[i]={exports:{}};e[i][0].call(l.exports,function(t){var n=e[i][1][t];return s(n?n:t)},l,l.exports,t,e,n,a)}return n[i].exports}for(var r="function"==typeof require&&require,i=0;i<a.length;i++)s(a[i]);return s}({1:[function(t,e,n){var a;e.exports=a=function(){function t(t){this.$node=t,this.pieFn=d3.layout.pie().startAngle(0).endAngle(Math.PI).padAngle(.025).sort(null).value(function(t){return t.value}),this.arcFn=d3.svg.arc().innerRadius(this._size/1.35).outerRadius(this._size),this.svg=d3.select(this.$node[0]).append("svg:svg").attr({"class":"gauges",height:this._size,transform:"translate(0, "+this._size+")"})}return t.prototype._size=68,t.prototype.update=function(t){var e,n;return n=this,e=this.svg.selectAll("g.gauge").data(t).enter().append("svg:g").each(function(t,e){var a;return a=d3.select(this),a.attr({"class":"gauge "+t.metric,transform:"translate("+(2*n._size*e+15*e+5)+", 0)"}),a.append("svg:text").text(t.metric).attr({"class":"label",x:n._size,y:n._size-10,"text-anchor":"middle"}),a.selectAll("path").data(n.pieFn(t.data)).enter().append("path").attr({"class":function(t){return t.data.type+" "+t.data.name},d:n.arcFn,transform:"translate("+n._size+", "+n._size+") rotate(-90)"}).each(function(t){return this._curAngle=t})}),this.svg.selectAll("g.gauge").data(t).each(function(t){return d3.select(this).selectAll("path").data(n.pieFn(t.data)).transition().duration(500).attrTween("d",function(t){var e;return e=d3.interpolate(this._curAngle,t),this._curAngle=e(0),function(t){return n.arcFn(e(t))}})})},t}()},{}],2:[function(t,e,n){var a,s,r,i,c=function(t,e){return function(){return t.apply(e,arguments)}};a=t("gauges"),r=t("./utils"),i=t("jade/component"),s=function(){function t(t,e){this.options=null!=e?e:{},this.updateData=c(this.updateData,this),this.options.metrics||(this.options.metrics=["cpu","ram"]),this.$node=$(i({metrics:this.options.metrics})),t.append(this.$node)}return t.prototype.build=function(){return this.gauges=new a($(".gauges",this.$node)),this.$table=$("table.services",this.$node),this._updateData()},t.prototype.updateData=function(t){return this.gauges.update(r.getDataByMetrics(t)),this._updateTable(t)},t.prototype._updateTable=function(t){var e;return t.push({type:"internal",name:"free",metrics:r.calculateUnused(t)}),e=d3.select($("table.services tbody.stats",this.$node).get(0)),e.selectAll("tr").data(t).each(function(t){return d3.select(this).selectAll(".name").text(t.name),d3.select(this).selectAll(".ram").text((100*t.metrics.ram).toPrecision(2)+"%"),d3.select(this).selectAll(".cpu").text((100*t.metrics.cpu).toPrecision(2)+"%")}),e.selectAll("tr").data(t).enter().append("tr").attr("class",function(t){return t.name}).each(function(t){return d3.select(this).append("td").attr({"class":"icon"}).append("div").attr({"class":"icon-wrap"}).append("img").attr({"class":"shadow-icon","data-src":"hex-"+t.kind,scalable:!0}),d3.select(this).append("td").attr({"class":"stat name"}).text(t.name),d3.select(this).append("td").attr({"class":"stat metric ram"}).text((100*t.metrics.ram).toPrecision(2)+"%"),d3.select(this).append("td").attr({"class":"stat metric cpu"}).text((100*t.metrics.cpu).toPrecision(2)+"%")}),castShadows($("tbody",this.$table))},t.prototype._updateData=function(){return PubSub.publish("STATS.SUBSCRIBE.USAGE_BREAKDOWN",{entity:this.options.entity,entityId:this.options.entityId,metrics:this.options.metrics,callback:this.updateData})},t}(),window.nanobox||(window.nanobox={}),nanobox.UsageBreakdown=s},{"./utils":3,gauges:1,"jade/component":4}],3:[function(t,e,n){var a;e.exports=a=function(){function t(){}return t.getDataByMetrics=function(t){var e,n,a,s,r,i,c,o;for(r={},n=0,s=t.length;s>n;n++){e=t[n],i=e.metrics;for(a in i)o=i[a],r[a]||(r[a]=[]),r[a].push({type:e.type,name:e.name,value:o})}c=this.calculateUnused(t);for(a in c)o=c[a],r[a].push({type:"internal",name:"unused",value:o});return Object.keys(r).map(function(t){return{metric:t,data:r[t]}})},t.calculateUnused=function(t){var e,n,a,s,r,i,c,o;for(i={},c={},n=0,s=t.length;s>n;n++){e=t[n],r=e.metrics;for(a in r)o=r[a],i[a]||(i[a]=0),i[a]+=o}for(a in i)o=i[a],c[a]=1-o;return c},t}()},{}],4:[function(t,e,n){e.exports=function(t){var e,n=[],a=t||{};return function(t,a){n.push('<div class="nanobox-dash-ui-usage-breakdown"><div class="component"><div class="gauges"></div><table class="services"><thead class="labels"><tr><th colspan="2"></th>'),function(){var a=t;if("number"==typeof a.length)for(var s=0,r=a.length;r>s;s++){var i=a[s];n.push('<th class="label">'+jade.escape(null==(e=i)?"":e)+"</th>")}else{var r=0;for(var s in a){r++;var i=a[s];n.push('<th class="label">'+jade.escape(null==(e=i)?"":e)+"</th>")}}}.call(this),n.push('</tr></thead><tbody class="stats"></tbody></table></div></div>')}.call(this,"metrics"in a?a.metrics:"undefined"!=typeof metrics?metrics:void 0,"undefined"in a?a.undefined:void 0),n.join("")}},{}]},{},[2]);