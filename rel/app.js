!function t(e,n,a){function s(r,o){if(!n[r]){if(!e[r]){var u="function"==typeof require&&require;if(!o&&u)return u(r,!0);if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var d=n[r]={exports:{}};e[r][0].call(d.exports,function(t){var n=e[r][1][t];return s(n?n:t)},d,d.exports,t,e,n,a)}return n[r].exports}for(var i="function"==typeof require&&require,r=0;r<a.length;r++)s(a[r]);return s}({1:[function(t,e,n){var a;e.exports=a=function(){function t(t){var e,n,a,s;a=this,this.$node=t[0],s=135,this.width=s,this.height=s,n=s/2,e=s/2.7,this.pieFn=d3.layout.pie().startAngle(0).endAngle(Math.PI).padAngle(.025).sort(null).value(function(t){return t.value}),this.arcFn=d3.svg.arc().innerRadius(e).outerRadius(n),this.svg=d3.select(this.$node).append("svg:svg").attr({"class":"gauges",height:this.height/2,transform:"translate(0, "+this.height/2+")"})}return t.prototype.update=function(t){var e,n;return n=this,e=this.svg.selectAll("g.gauge").data(t).enter().append("svg:g").style("opacity",0).transition().duration(500).delay(250).style("opacity",1).each(function(t,e){var a;return a=d3.select(this),a.attr({"class":"gauge "+t.metric,transform:"translate("+(n.width*e+15*e+5)+", 0)"}),a.append("svg:text").text(t.metric).attr({"class":"label",x:n.width/2,y:n.height/2-10,"text-anchor":"middle"}),a.selectAll("path").data(n.pieFn(t.data)).enter().append("path").attr({"class":function(t){return t.data.type+" "+t.data.name},d:n.arcFn,transform:"translate("+n.width/2+", "+n.height/2+") rotate(-90)"}).each(function(t){return this._curAngle=t})}),this.svg.selectAll("g.gauge").data(t).each(function(t){return d3.select(this).selectAll("path").data(n.pieFn(t.data)).transition().duration(500).attrTween("d",function(t){var e;return e=d3.interpolate(this._curAngle,t),this._curAngle=e(0),function(t){return n.arcFn(e(t))}})})},t}()},{}],2:[function(t,e,n){var a,s,i,r,o=function(t,e){return function(){return t.apply(e,arguments)}};i=t("jade/component"),a=t("gauges"),r=t("jade/stats-row"),s=function(){function t(t,e){this.options=null!=e?e:{},this.update=o(this.update,this),this.options.logsEnabled||(this.options.logsEnabled=!1),this.options.loglevel||(this.options.logLevel="INFO"),this.$node=$(i()),t.append(this.$node)}return t.prototype.build=function(){return this.$gauges=$(".gauges",this.$node),this.$table=$("table.services",this.$node),this._subscribeToUsageBreakdownData(this.options.id)},t.prototype.update=function(t){return $("svg",this.$gauges).length?this._updateGauges(t):this._buildGauges(t),$("tbody.stats",this.$table).children().length?this._updateTable(t):this._buildTable(t)},t.prototype._buildGauges=function(t){return this.gauges=new a(this.$gauges,{data:this._getDataByMetrics(t)})},t.prototype._buildTable=function(t){var e,n,a,s,i,o,u,l,d,c,h,p,g;for(h=this._getDataByMetrics(t),s=0,o=h.length;o>s;s++)d=h[s],$("thead tr",this.$table).append($("<th class='label'>"+d.metric+"</td>"));for(t.push({type:"internal",name:"free",metrics:this._calculateUnused(t)}),a=i=0,u=t.length;u>i;a=++i){for(n=t[a],g=[],p=this._getDataByMetrics(t),c=0,l=p.length;l>c;c++)d=p[c],g.push({metric:d.metric,val:100*d.data[a].value});e=$(r({name:n.name,kind:n.kind,rows:g})),$("tbody",this.$table).append(e)}return castShadows($("tbody",this.$table))},t.prototype._updateGauges=function(t){return this.gauges.update(this._getDataByMetrics(t))},t.prototype._updateTable=function(t){var e,n,a,s,i,r;for(t.push({type:"internal",name:"free",metrics:this._calculateUnused(t)}),r=[],n=a=0,s=t.length;s>a;n=++a)e=t[n],r.push(function(){var a,s,r,o;for(r=this._getDataByMetrics(t),o=[],a=0,s=r.length;s>a;a++)i=r[a],o.push($("."+e.name+" ."+i.metric,this.$node).html((100*i.data[n].value).toPrecision(2)+"%"));return o}.call(this));return r},t.prototype._subscribeToUsageBreakdownData=function(t){return PubSub.publish("STATS.SUBSCRIBE.USAGE_BREAKDOWN",{statProviderId:t,callback:this.update})},t.prototype._getDataByMetrics=function(t){var e,n,a,s,i,r,o,u;for(i={},n=0,s=t.length;s>n;n++){e=t[n],r=e.metrics;for(a in r)u=r[a],i[a]||(i[a]=[]),i[a].push({type:e.type,name:e.name,value:u})}o=this._calculateUnused(t);for(a in o)u=o[a],i[a].push({type:"internal",name:"unused",value:u});return Object.keys(i).map(function(t){return{metric:t,data:i[t]}})},t.prototype._calculateUnused=function(t){var e,n,a,s,i,r,o,u;for(r={},o={},n=0,s=t.length;s>n;n++){e=t[n],i=e.metrics;for(a in i)u=i[a],r[a]||(r[a]=0),r[a]+=u}for(a in r)u=r[a],o[a]=1-u;return o},t}(),window.nanobox||(window.nanobox={}),nanobox.UsageBreakdown=s},{gauges:1,"jade/component":3,"jade/stats-row":4}],3:[function(t,e,n){e.exports=function(t){var e=[];return e.push('<div class="nanobox-dash-ui-usage-breakdown"><div class="component"><div class="gauges"></div><table class="services"><thead class="labels"><tr><td colspan="2"></td></tr></thead><tbody class="stats"></tbody></table></div></div>'),e.join("")}},{}],4:[function(t,e,n){e.exports=function(t){var e,n=[],a=t||{};return function(t,a,s,i){n.push("<tr"+jade.cls([""+a],[!0])+'><td class="icon">'),t!=i&&n.push('<div class="icon-wrap"><img'+jade.attr("data-src","hex-"+t,!0,!1)+' scalable="true" class="shadow-icon"/></div>'),n.push('</td><td class="stat name">'+jade.escape(null==(e=a)?"":e)+"</td>"),function(){var t=s;if("number"==typeof t.length)for(var a=0,i=t.length;i>a;a++){var r=t[a];n.push("<td"+jade.cls(["stat","metric",""+r.metric],[null,null,!0])+">"+jade.escape(null==(e=r.val)?"":e)+"%</td>")}else{var i=0;for(var a in t){i++;var r=t[a];n.push("<td"+jade.cls(["stat","metric",""+r.metric],[null,null,!0])+">"+jade.escape(null==(e=r.val)?"":e)+"%</td>")}}}.call(this),n.push("</tr>")}.call(this,"kind"in a?a.kind:"undefined"!=typeof kind?kind:void 0,"name"in a?a.name:"undefined"!=typeof name?name:void 0,"rows"in a?a.rows:"undefined"!=typeof rows?rows:void 0,"undefined"in a?a.undefined:void 0),n.join("")}},{}]},{},[2]);